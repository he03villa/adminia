<div class="row p-3 row-padre">


    <div class="col-12 p-3">
        <div class="bordermix">

            <div class="col-12">
                <h2>Crea un conjunto</h2>
            </div>

            <form [formGroup]="form" class="contenedor-input">

                <div class="item-input">
                    <p> Nombre del conjunto: </p>
                    <input type="text" formControlName="nombre" (keyup)="cambiarValidarMensaje()" placeholder="">

                    <ng-container *ngIf="form.controls.nombre.errors && !validarMensaje">
                        <label for="" *ngIf="form.controls.nombre.errors.required">El nombre de la propiedad está
                            vacio</label>
                    </ng-container>
                </div>
                <div class="item-input">
                    <p> Correo del conjunto: </p>
                    <input type="text" formControlName="email" (keyup)="cambiarValidarMensaje()" placeholder="">
                    <ng-container *ngIf="form.controls.email.errors && !validarMensaje">
                        <label for="" *ngIf="form.controls.email.errors.required">El email de la propiedad está
                            vacio</label>
                        <label for="" *ngIf="form.controls.email.errors.email">El email no es valido</label>
                    </ng-container>
                </div>
                <div class="item-input">
                    <p> Contranseña del conjunto: </p>
                    <input type="password" formControlName="password" (keyup)="cambiarValidarMensaje()" placeholder="">
                    <ng-container *ngIf="form.controls.password.errors && !validarMensaje">
                        <label for="" *ngIf="form.controls.password.errors.required">La contraseña de la propiedad está
                            vacio</label>
                    </ng-container>
                </div>
                <div class="item-input">

                    <p> Tipo de la propiedad </p>
                    <select name="" id="" formControlName="tipo_propiedad_id" (change)="cambiarValidarMensaje()">
                        <option value="">Selecciona un tipo</option>
                        <option *ngFor="let item of arrayTipo" [value]="item.id">{{ item.nombre }}</option>
                    </select>
                    <ng-container *ngIf="form.controls.tipo_propiedad_id.errors && !validarMensaje">
                        <label for="" *ngIf="form.controls.tipo_propiedad_id.errors.required">Selecciona un tipo a la
                            proiedad</label>
                    </ng-container>
                </div>
                <div class="item-input">

                    <p> Dirección propiedad: </p>
                    <input type="text" placeholder="" formControlName="direccion" (keyup)="cambiarValidarMensaje()">
                    <ng-container *ngIf="form.controls.direccion.errors && !validarMensaje">
                        <label for="" *ngIf="form.controls.direccion.errors.required">La dirección de la propiedad está
                            vacio</label>
                    </ng-container>
                </div>
                <div class="item-input">

                    <p> Departamento: </p>
                    <input type="text" placeholder="" formControlName="departamento" (keyup)="cambiarValidarMensaje()">
                    <ng-container *ngIf="form.controls.departamento.errors && !validarMensaje">
                        <label for="" *ngIf="form.controls.departamento.errors.required">El departamento de la propiedad
                            está
                            vacio</label>
                    </ng-container>
                </div>
                <div class="item-input">

                    <p> Ciudad: </p>
                    <input type="text" placeholder="" formControlName="ciudad" (keyup)="cambiarValidarMensaje()">
                    <ng-container *ngIf="form.controls.ciudad.errors && !validarMensaje">
                        <label for="" *ngIf="form.controls.ciudad.errors.required">La ciudad de la propiedad está
                            vacio</label>
                    </ng-container>
                </div>
                <div class="item-input">

                    <p> Código postal </p>
                    <input type="number" placeholder="" formControlName="codigo_postal" (keyup)="cambiarValidarMensaje()">
                    <ng-container *ngIf="form.controls.codigo_postal.errors && !validarMensaje">
                        <label for="" *ngIf="form.controls.codigo_postal.errors.required">El código postal de la
                            propiedad
                            está
                            vacio</label>
                        <label for="" *ngIf="form.controls.codigo_postal.errors.maxlength">El código postal nada mas
                            tiene
                            permitido
                            7 dígitos</label>
                    </ng-container>
                </div>
                <div class="item-input">
                    <p> Telefono de la propiedad </p>
                    <input type="number" placeholder="" formControlName="telefono" (keyup)="cambiarValidarMensaje()">
                    <ng-container *ngIf="form.controls.telefono.errors && !validarMensaje">
                        <label for="" *ngIf="form.controls.telefono.errors.required">El telefono está vacio</label>
                    </ng-container>
                </div>
            </form>
            <div class="row contenedor-input" *ngIf="form.controls.tipo_propiedad_id.value == 1">
                <div class="item-input col-4">
                    <p> Nombre de la propiedad </p>
                    <input type="text" placeholder="" [(ngModel)]="dataUbanizacionCasa.nombre_nomezclatura" (keyup)="cambiarValidarMensaje();llenarArray()">
                    <!-- <ng-container *ngIf="form.controls.nombre_nomezclatura.errors && !validarMensaje">
                        <label for="" *ngIf="form.controls.nombre_nomezclatura.errors.required">El nombre postal de la
                            propiedad
                            está vacio</label>
                    </ng-container> -->
                </div>
                <div class="item-input col-4">
                    <p> Cantidad de propiedades </p>
                    <input type="number" placeholder="" [(ngModel)]="dataUbanizacionCasa.cantidad_propiedad" (keyup)="cambiarValidarMensaje();llenarArray()">
                    <!-- <ng-container *ngIf="form.controls.cantidad_propiedad.errors && !validarMensaje">
                        <label for="" *ngIf="form.controls.cantidad_propiedad.errors.required">El nombre postal de la
                            propiedad está
                            vacio</label>
                    </ng-container> -->
                </div>
                <div class="item-input col-4">
                    <p> Numero de inicio de la propiedad </p>
                    <input type="number" placeholder="" [(ngModel)]="dataUbanizacionCasa.inicio_nomezclatura" (keyup)="cambiarValidarMensaje();llenarArray()">
                    <!-- <ng-container *ngIf="form.controls.inicio_nomezclatura.errors && !validarMensaje">
                        <label for="" *ngIf="form.controls.inicio_nomezclatura.errors.required">El nombre postal de la
                            propiedad
                            está vacio</label>
                    </ng-container> -->
                </div>
            </div>
            <div class="item-input vistaprevia-apar" *ngIf="form.controls.tipo_propiedad_id.value == 1">
                <p> Vista previa </p>
                <div class="contenedorvistaprevia" *ngIf="arrayNombre.length > 0">
                    <label *ngFor="let item of arrayNombre">{{ item }}</label><br>
                    <!-- {{ form.controls.inicio_nomezclatura.value + indece }} -->
                </div>
            </div>
            <div class="row contenedor-input" *ngIf="form.controls.tipo_propiedad_id.value == 2">
                <div class="item-input col-12">
                    <p> Numero de torres </p>
                    <input type="number" placeholder="" [(ngModel)]="dataEdificioPartamento.numero_torres" (keyup)="cambiarValidarMensaje();pushArrayNumeroPiso()" (change)="pushArrayNumeroPiso()">
                </div>

                <div class="item-input col-12" *ngFor="let item of dataEdificioPartamento.arrayNumeroPiso; let indicet = index">
                    <p> Pisos torre {{ indicet + 1 }} </p>
                    <div class="edificio" *ngFor="let item2 of item; let indece = index">
                        <div>
                            <label for="">Del</label>
                            <input type="number" placeholder="" [readonly]="item[indece - 1] ? true : false" [min]="item[indece - 1] ? item[indece - 1].piso_fin : 0" [(ngModel)]="item2.piso_inicio" (keyup)="llenarArrayNombreEdificio()" (change)="llenarArrayNombreEdificio()">
                        </div>
                        <div>
                            <label for="">Al</label>
                            <input type="number" placeholder="" [(ngModel)]="item2.piso_fin" (keyup)="llenarArrayNombreEdificio();llenarSiguiente(item)" (change)="llenarArrayNombreEdificio()">
                        </div>
                        <div>
                            <label for="">Numero apartamento</label>
                            <input type="number" placeholder="" [(ngModel)]="item2.cantdad" (keyup)="llenarArrayNombreEdificio()" (change)="llenarArrayNombreEdificio()">
                        </div>
                    </div>
                    <button class="btn" (click)="pushArrayNumeroPisoLlenar(item)">Agregar</button>
                </div>

            </div>
            <div class="item-input vistaprevia-apar" *ngIf="form.controls.tipo_propiedad_id.value == 2">
                <p> Vista previa </p>
                <div class="contenedorvistaprevia" *ngIf="arrayNombreEdificio.length > 0">
                    <div class="row">
                        <div class="col-4 edificio2" *ngFor="let item of arrayNombreEdificio">
                            <p>Torre {{ item.torre }}</p>
                            <label *ngFor="let item2 of item.array">{{ item2.name }}</label>
                        </div>
                    </div>
                    <!-- {{ form.controls.inicio_nomezclatura.value + indece }} -->
                </div>
            </div>
            <button class="btn" (click)="saveCopropiedad($event)">Registrar</button>
            <button class="btn" (click)="services.url('/login')">Atras</button>
        </div>
    </div>
</div>